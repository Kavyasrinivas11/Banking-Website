<!DOCTYPE html> <html lang="en"> 
    <head>
 <meta charset="UTF-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<title>Dashboard</title> <link rel="preconnect" href="https://fonts.googleapis.com"> 
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
 <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet"> 
 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css" integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css" rel="stylesheet" /> 
  <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous"> 
   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script> <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"> <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script> 
   <style>
    html, body
     { 
        overflow-x: hidden;
         font-family: "Playfair Display", serif;
          }
           </style> 
           </head>
            <body style="background-image: url('https://png.pngtree.com/thumb_back/fh260/background/20230721/pngtree-3d-rendered-credit-card-with-check-mark-image_3722480.jpg'); background-repeat:no-repeat;background-size: cover;background-attachment: fixed;">
                 <nav class="sticky top-8 bg-blue-100 shadow px-4 py-2 flex justify-between items-center z-50"> 
                    <span class="flex items-center text-4xl text-primary font-bold p-3"> Bank App </span> 
                    <h4 class="text-primary text-2xl" style="margin-left: 160px;"> 
                        <a href="" style="text-decoration: none;">Home</a> &nbsp; &nbsp;
                         <a href="" style="text-decoration: none;">Features</a> &nbsp; &nbsp;
                          <a href="" style="text-decoration: none;">Pricing</a> &nbsp; &nbsp; 
                          <a href="" style="text-decoration: none;">About</a> 
                        </h4>
                     </nav>
                      <!-- Welcome and Balance -->
                        <p class="text-center fw-bolder text-6xl mt-5 text-white" id="username"></p>
                         <p class="text-center fw-bold text-2xl mt-3 text-white">Balance: ₹<span id="balance">0</span></p>
                          <p class="text-center fw-bold text-2xl mt-5 text-white">Online Banking Services</p>
                           <!-- Deposit & Withdraw Sections --> 
                            <div class="row mt-5 gy-3 px-3 mb-4" style="overflow-x: hidden;"> 
                                <!-- Deposit -->
                                 x <div class="col-md-5 mt-5 pt-5 bg-white mx-auto">
                                     <form class="pl-5 pr-5" onsubmit="event.preventDefault(); deposit();">
                                         <h2 class="text-primary fw-bold text-5xl mb-4 ml-3">Deposit</h2>
                                          <input type="number" id="depositAmt" class="form-control form-control-lg rounded mb-5 border-0" placeholder="Enter Your Amount" required> 
                                          <input type="password" id="depositPass" class="form-control form-control-lg rounded mb-5 border-0" placeholder="Enter Your Password" required>
                                           <button type="submit" class="bg-blue-900 hover:bg-blue-800 text-white mt-4 mb-5 w-25 p-3 font-bold rounded-lg shadow d-block mx-auto" style="border-radius: 12px;">Deposit</button>
                                         </form> </div> <!-- Withdraw --> <div class="col-md-5 mt-5 pt-5 bg-white mx-auto"> <form class="pr-5 pl-5" onsubmit="event.preventDefault(); withdraw();">
                                             <h2 class="text-primary fw-bold text-5xl mb-4 ml-3">Withdraw</h2>
                                              <input type="number" id="withdrawAmt" class="form-control form-control-lg rounded mb-5 border-0" placeholder="Enter Your Amount" required> 
                                              <input type="password" id="withdrawPass" class="form-control form-control-lg rounded mb-5 border-0" placeholder="Enter Your Password" required>
                                               <button type="submit" class="bg-blue-900 hover:bg-blue-800 text-white mt-4 mb-5 w-25 p-3 font-bold rounded-lg shadow d-block mx-auto" style="border-radius: 12px;">Withdraw</button> 
                                            </form>
                                         </div> 
                                        </div> 
                                        <!-- Transaction History --> 
                                         <div class="flex justify-center items-center p-5">
                                             <div class="text-center px-5 pt-5 pb-5 mt-5 bg-white shadow w-50 rounded-xl"> 
                                                <p class="text-5xl font-semibold mb-5 text-primary">Transaction History</p> 
                                                <table class="w-100 rounded-xl table table-bordered"> 
                                                    <thead>
                                                         <tr class="bg-primary text-white font-bold text-2xl p-5 mx-auto">
                                                             <th>Date</th>
                                                              <th>Type</th>
                                                               <th>Amount</th>
                                                                <th>Balance</th> 
                                                            </tr>
                                                         </thead>
                                                          <tbody id="transactionTable"></tbody>
                                                         </table> 
                                                        </div> 
                                                    </div>
  <script>
  // Get the currently logged-in account number
  let currentAcc = localStorage.getItem("currentUser");

  if (!currentAcc) {
    alert("No user found. Please login again.");
    window.location.href = "login.html";
  }

  // Load user details
  let userDetails = JSON.parse(localStorage.getItem(currentAcc));

  if (!userDetails) {
    alert("User data missing. Please register again.");
    window.location.href = "register.html";
  }

  // Initialize transactions if not present
  if (!userDetails.transactions) {
    userDetails.transactions = [];
  }

  // Show username
  document.getElementById("username").innerHTML = `
  <span style="font-size: 4rem; font-weight: bold; color: white;">Welcome</span>
  <span style="font-size: 3rem; color: yellow; margin-left: 10px;">${userDetails.username}</span>
`;


  // Show initial balance (default 0 if missing)
  let balance = userDetails.balance || 0;
  document.getElementById("balance").innerText = balance;


  localStorage.setItem(currentAcc, JSON.stringify({...JSON.parse(localStorage.getItem(currentAcc)), transactions: []}));

  // Render transactions in table
  function renderTransactions() {
    let table = document.getElementById("transactionTable");
    table.innerHTML = "";
    userDetails.transactions.forEach((t, index) => {
      let row = `<tr>
        <td>${index + 1}</td>
        <td>${t.type}</td>
        <td>${t.amount}</td>
        <td>${t.date}</td>
        <td>${t.balance}</td>
      </tr>`;
      table.innerHTML += row;
    });
  }
  renderTransactions();

  // Save user back to localStorage
  function saveUser() {
    localStorage.setItem(currentAcc, JSON.stringify(userDetails));
  }

  // Deposit
  function deposit() {
    let amount = Number(document.getElementById("depositAmt").value);
    let password = document.getElementById("depositPass").value;

    if (password === userDetails.password && amount > 0) {
      balance += amount;
      userDetails.balance = balance;

      // Add transaction
      userDetails.transactions.push({
        type: "Deposit",
        amount: amount,
        date: new Date().toLocaleString(),
        balance: balance
      });

      saveUser();
      document.getElementById("balance").innerText = balance;
      renderTransactions();
      alert("₹" + amount + " Deposited Successfully");
    } else {
      alert("Invalid deposit details");
    }
  }

  // Withdraw
  function withdraw() {
    let amount = Number(document.getElementById("withdrawAmt").value);
    let password = document.getElementById("withdrawPass").value;

    if (password === userDetails.password && amount > 0 && amount <= balance) {
      balance -= amount;
      userDetails.balance = balance;

      // Add transaction
      userDetails.transactions.push({
        type: "Withdraw",
        amount: amount,
        date: new Date().toLocaleString(),
        balance: balance
      });

      saveUser();
      document.getElementById("balance").innerText = balance;
      renderTransactions();
      alert("₹" + amount + " Withdrawn Successfully");
    } else {
      alert("Invalid withdraw details or insufficient balance");
    }
  }
</script>

</body>
</html>