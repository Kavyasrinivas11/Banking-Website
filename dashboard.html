<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link  href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400..900;1,400..900&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
      integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw==" crossorigin="anonymous"
      referrerpolicy="no-referrer"/>
    <link href="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.css"  rel="stylesheet"/>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@3.1.2/dist/flowbite.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous"/>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" 
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"/>
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <style>
      html,
      body {
        overflow-x: hidden;
        font-family: "Playfair Display", serif;
      }
    </style>
  </head>

<body style="background-image: url('https://png.pngtree.com/thumb_back/fh260/background/20230721/pngtree-3d-rendered-credit-card-with-check-mark-image_3722480.jpg'); 
    background-repeat:no-repeat; background-size: cover; background-attachment: fixed;">

  <nav class="sticky-top bg-blue-100 shadow px-3 py-2 d-flex flex-nowrap justify-content-between align-items-center z-50">
  <span class="d-flex align-items-center text-primary fw-bold fs-3">
     <img src="https://img.freepik.com/premium-psd/bank-icon-transparent-background_1046662-28747.jpg"   class="me-2" style="height:40px;width:40px;"> 
     Bank App </span>

  <div class="d-flex align-items-center gap-3 overflow-auto flex-nowrap">
    <a href="index.html" class="text-decoration-none text-primary">Home</a>
    <a href="#" class="text-decoration-none text-primary">Features</a>
    <a href="#" class="text-decoration-none text-primary">Pricing</a>
    <a href="#" class="text-decoration-none text-primary">About</a>
    <button class="btn btn-danger ms-2" onclick="logout()">Logout</button>
  </div>
</nav>

  <div class="text-center mt-4">
    <p id="username" class="fw-bolder text-white fs-3 fs-md-1"></p>
    <p class="fw-bold text-white fs-5 fs-md-2 mt-2"> Balance: ₹<span id="balance">0</span> </p>
    <p class="fw-bold text-white fs-5 fs-md-2 mt-3">Online Banking Services</p>
  </div>

<div class="container mt-4 mb-4">
  <div class="row justify-content-center">
    
    <div class="col-12 col-md-5 bg-white p-4 rounded shadow mx-md-4 my-3">
    <!-- Deposit -->
      <form onsubmit="return false;">
        <h2 class="text-primary fw-bold fs-4 fs-md-1 mb-3">Deposit</h2>
        <input type="number" id="depositAmt" class="form-control form-control-lg mb-3 rounded" placeholder="Enter Your Amount" required />
        <input type="password" id="depositPass" class="form-control form-control-lg mb-3 rounded" placeholder="Enter Your Password" required />
        <button type="submit" class="btn btn-primary w-100" onclick="deposit()">Deposit</button>
      </form>
    </div>

    <!-- Withdraw -->
     <div class="col-12 col-md-5 bg-white p-4 rounded shadow mx-md-4 my-3">
      <form onsubmit="return false;">
        <h2 class="text-primary fw-bold fs-4 fs-md-1 mb-3">Withdraw</h2>
        <input type="number" id="withdrawAmt" class="form-control form-control-lg mb-3 rounded" placeholder="Enter Your Amount" required />
        <input type="password" id="withdrawPass" class="form-control form-control-lg mb-3 rounded" placeholder="Enter Your Password" required />
        <button type="submit" class="btn btn-primary w-100" onclick="withdraw()">Withdraw</button>
      </form>
    </div>
  </div>
</div>

  <div class="container my-4">
    <div class="bg-white shadow rounded p-3 p-md-5">
      <p class="text-primary fw-bold fs-4 fs-md-1 mb-4 text-center">Transaction History</p>
      <div class="table-responsive">
        <table class="table table-bordered table-striped">
          <thead class="table-primary text-white">
            <tr>
              <th>No.</th>
              <th>Type</th>
              <th>Amount</th>
              <th>Date</th>
              <th>Balance</th>
            </tr>
          </thead>
          <tbody id="transactionTable"></tbody>
        </table>
      </div>
    </div>
  </div>

</body>

    <script>
      // Get current user
      let currentAcc = localStorage.getItem("currentUser");

      if (!currentAcc) {
        alert("No user found. Please login again.");
        window.location.href = "login.html";
      }

      // Load user details
      let userDetails = JSON.parse(localStorage.getItem(currentAcc));

      if (!userDetails) {
        alert("User data missing. Please register again.");
        window.location.href = "register.html";
      }

      // Initialize transactions if not present
      if (!userDetails.transactions) {
        userDetails.transactions = [];
      }

      // Show username
      document.getElementById("username").innerHTML = `
        <span style="font-size: 4rem; font-weight: bold; color: white;">Welcome</span>
        <span style="font-size: 3rem; color: yellow; margin-left: 10px;">${userDetails.username}</span>
      `;

      // Show initial balance
      let balance = userDetails.balance || 0;
      document.getElementById("balance").innerText = balance;

      // Save function
      function saveUser() {
        localStorage.setItem(currentAcc, JSON.stringify(userDetails));
      }

      // Render Transactions
      function renderTransactions() {
        let table = document.getElementById("transactionTable");
        table.innerHTML = "";
        userDetails.transactions.forEach((t, index) => {
          let row = `<tr>
            <td>${index + 1}</td>
            <td>${t.type}</td>
            <td>₹${t.amount}</td>
            <td>${t.date}</td>
            <td>₹${t.balance}</td>
          </tr>`;
          table.innerHTML += row;
        });
      }
      renderTransactions();

      // Deposit
      function deposit() {
        let amount = Number(document.getElementById("depositAmt").value);
        let password = document.getElementById("depositPass").value;

        if (password === userDetails.password && amount > 0) {
          balance += amount;
          userDetails.balance = balance;

          userDetails.transactions.push({
            type: "Deposit",
            amount: amount,
            date: new Date().toLocaleString(),
            balance: balance,
          });

          saveUser();
          document.getElementById("balance").innerText = balance;
          renderTransactions();
          alert("₹" + amount + " Deposited Successfully");
        } else {
          alert("Invalid deposit details");
        }
      }

      // Withdraw
      function withdraw() {
        let amount = Number(document.getElementById("withdrawAmt").value);
        let password = document.getElementById("withdrawPass").value;

        if (password === userDetails.password && amount > 0 && amount <= balance) {
          balance -= amount;
          userDetails.balance = balance;

          userDetails.transactions.push({
            type: "Withdraw",
            amount: amount,
            date: new Date().toLocaleString(),
            balance: balance,
          });

          saveUser();
          document.getElementById("balance").innerText = balance;
          renderTransactions();
          alert("₹" + amount + " Withdrawn Successfully");
        } else {
          alert("Invalid withdraw details or insufficient balance");
        }
      }

      // ✅ Logout function
      function logout() {
        localStorage.removeItem("currentUser");
        alert("You have been logged out successfully.");
        window.location.href = "login.html";
      }
    </script>
  </body>
</html>
